(self.cloudinaryVideoPlayerChunkLoading=self.cloudinaryVideoPlayerChunkLoading||[]).push([[404],{9017:(t,e,n)=>{n.d(e,{F0:()=>r,Fg:()=>i,IT:()=>c,T$:()=>l,Vv:()=>d,Yx:()=>s,be:()=>a,q3:()=>u,sb:()=>o});const o="cld-ia-layout-state",a="vp-ia",i="interaction-areas-container",r={PORTRAIT:"portrait",LANDSCAPE:"landscape",All:"all",CENTER:"center"},c={PULSING:"pulsing",SHADOWED:"shadowed"},s={[r.PORTRAIT]:"https://res.cloudinary.com/prod/raw/upload/v1623772481/video-player/vtts/portrait.vtt",[r.LANDSCAPE]:"https://res.cloudinary.com/prod/raw/upload/v1623772303/video-player/vtts/landscape.vtt",[r.All]:"https://res.cloudinary.com/prod/raw/upload/v1623250266/video-player/vtts/all.vtt",[r.CENTER]:"https://res.cloudinary.com/prod/raw/upload/v1623250265/video-player/vtts/center.vtt"},l="https://res.cloudinary.com/prod/image/upload/v1626764643/video-player/interaction-area-hand.svg",d=4500,u=250},1066:(t,e,n)=>{n.d(e,{interactionAreasService:()=>C});var o=n(7938),a=n.n(o),i=n(2832),r=n.n(i),c=n(2858),s=n.n(c),l=n(5114),d=n.n(l),u=n(9017),v=n(7134),p=n(4500);const h=t=>{let{text:e,onClick:n,theme:o="",loadingDelay:a=0}=t;return(0,v.It)({tag:"button",attr:{class:"vp-theme-button theme-".concat(o)},onClick:n,children:[{tag:"div",attr:{class:"vp-loading-bar"},style:{"animation-duration":"".concat(a,"ms")}},{tag:"div",attr:{class:"content"},children:e}]})},f=(t,e)=>t.id||t.type||"id_".concat(e),m=(t,e,n,o,a)=>{let{playerOptions:i,videojsOptions:c}=t;const s=(0,p.w)(c),l=i&&i.colors?i.colors.accent:s.accent,d=r()(c,"interactionDisplay.theme.template",u.IT.PULSING);return(0,v.It)({tag:"div",attr:{class:"".concat(u.be,"-item theme-").concat(d),"data-id":f(e,n)},style:{left:"".concat(e.left,"%"),top:"".concat(e.top,"%"),width:"".concat(e.width,"%"),height:"".concat(e.height,"%"),transitionDuration:"".concat(o,"ms")},event:{name:"click",callback:a},children:[{tag:"div",attr:{class:"".concat(u.be,"-area-marker")},children:[{tag:"div",attr:{class:"".concat(u.be,"-marker-shadow")},style:{[d===u.IT.SHADOWED?"backgroundColor":"borderColor"]:l}},{tag:"div",attr:{class:"".concat(u.be,"-marker-main")},style:{borderColor:l}}]}]})},g=(t,e)=>t/(100/+e),y=(t,e)=>{const n=x(t);n?n.replaceWith(e):t.el().appendChild(e)},b=(t,e,n)=>t.querySelector("[data-id=".concat(f(e,n),"]")),T=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d();localStorage.setItem(u.sb,JSON.parse(t)),e()},x=t=>t.el().querySelector(".".concat(u.Fg)),E=t=>{const e=x(t);e&&e.parentNode.removeChild(e)};var w=n(8838),k=n(1104);const C=(t,e,n)=>{let o=!1,i=null,c=null,l=d();const p=()=>{const t=A();return!(!t||void 0===t.syncOffsetTime)&&t.syncOffsetTime};function C(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=A();return t||e&&e.enable}function j(){c&&t.videojs.removeRemoteTextTrack(c);const e=C(),n=A();if(!e||o)return null;if(Array.isArray(n.template))O(n.template),N();else{const e=n.vttUrl||u.Yx[n.template];e&&(c=(0,w.eo)(t.videojs,e),function(e){if(!e)return;let n=null;e.addEventListener("cuechange",(()=>{const o=e.activeCues&&e.activeCues[0];if(o){const t=Math.max(Math.floor(1e3*(o.endTime-o.startTime)),u.q3),e=JSON.parse(o.text);O(e,n,t),!n&&N(),n=e}else E(t.videojs),n=null}))}(c))}}function A(){const{cldSrc:t}=i;return t&&t.getInteractionAreas()}function D(){E(t.videojs),j(),t.play()}function I(){if(C())if(e=n.interactionDisplay,r()(e,"layout.enable",!0)&&"true"!==localStorage.getItem(u.sb)){let e=null;const o=r()(n,"interactionDisplay.layout.showAgain",!1);t.pause(),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!1;const a="checkbox_".concat(Math.round(1e4*Math.random())),i=(0,v.It)({tag:"div",attr:{class:"".concat(u.Fg," ").concat(u.be,"-layout-message ").concat(n?"":"clickable")},onClick:n?null:()=>T(o,e),children:[{tag:"img",attr:{class:"".concat(u.be,"-layout-icon"),src:u.T$}},{tag:"h3",attr:{class:"".concat(u.be,"-layout-message-title")},children:"Tap on dots to zoom for a product."},h({text:"Got it",theme:"transparent-white",loadingDelay:n?0:u.Vv,onClick:n?()=>T(o,e):null}),n&&{tag:"div",attr:{class:"".concat(u.be,"-layout-message-do-not-show")},children:[{tag:"input",attr:{type:"checkbox",class:"".concat(u.be,"-layout-message-checkbox"),id:a},event:{name:"input",callback:t=>{o=t.target.checked}}},{tag:"label",attr:{class:"".concat(u.be,"-layout-message-checkbox-title"),for:a},children:"Don×³t show it again"}]}].filter((t=>t))});y(t,i)}(t.videojs,(()=>{clearTimeout(e),D()}),o),o||(e=setTimeout(D,u.Vv))}else D();var e}function S(e){let{event:n,item:r,index:c}=e;const s=A();s.onClick&&s.onClick({item:r,index:c,event:n,zoom:(e,n)=>{!function(e,n,r){const c=t.currentTime(),s=p(),{cldSrc:d}=i,h=d.getInitOptions(),f=n||{transformation:h.transformation},m=!e&&((t,e)=>{const{videoHeight:n,videoWidth:o}=t,a=g(o,e.left),i=g(n,e.top),r=g(o,e.width),c=g(n,e.height),s=o/n,l=r/c,d=Math.round(l>1||s>1?c*l:r),u=Math.round(d/s),v=Math.round(a-(d-r)/2),p=Math.round(i-(u-c)/2);return{width:d,height:u,x:Math.min(Math.max(v,0),o-d),y:Math.min(Math.max(p,0),n-u),crop:"crop"}})(t.videoElement,r),b=m?a().obj.merge({transformation:m},f):f,T=d.isRawUrl?i.src:{publicId:d.publicId()};t.source(m?{publicId:d.publicId()}:e,b).play(),s&&t.currentTime(c),o=!0,function(){const e=(0,v.n)("div",{class:"go-back-button"});e.addEventListener("click",(()=>{l()}),!1);const n=(0,v.n)("div",{class:u.Fg},e);y(t.videojs,n)}(),l=()=>{if(o){o=!1;const e=t.currentTime(),n=t.duration();t.source(T,h).play(),s&&e<n&&t.currentTime(e),j()}}}(e,n,r)}})}function O(o,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={playerOptions:e,videojsOptions:n};if(a)((t,e,n,o,a,i)=>{const r=x(t);n.forEach(((t,n)=>{const c=b(r,t,n),s=f(t),l=o.some((t=>f(t)===s));l&&c?(0,v.cu)(c,{left:"".concat(t.left,"%"),top:"".concat(t.top,"%"),width:"".concat(t.width,"%"),height:"".concat(t.height,"%"),transitionDuration:"".concat(a,"ms")}):l||c||r.appendChild(m(e,t,n,a,(e=>{i({event:e,item:t,index:n})})))})),o.forEach(((t,e)=>{const o=b(r,t,e),a=f(t),i=!n.some((t=>f(t)===a));o&&i&&o.parentNode.removeChild(o)}))})(t.videojs,r,o,a,i,S);else{const e=o.map(((t,e)=>m(r,t,e,i,(n=>{S({event:n,item:t,index:e})}))));y(t.videojs,(0,v.n)("div",{class:u.Fg},e))}}function N(){C()&&((t,e)=>{const n=x(t);if(!n)return;const{videoHeight:o,videoWidth:a}=e,i=a/o,r=i*e.clientHeight;n.style.width="".concat(e.clientWidth<r?"100%":r,"px"),n.style.height=e.clientWidth<r?"".concat(e.clientWidth/i,"px"):"100%"})(t.videojs,t.videoElement)}!function(){if(i=i||t.videojs.currentSource(),C()){t.videojs.el().classList.add("interaction-areas"),t.videojs.one(k.f.PLAY,(()=>{"object"==typeof t.videojs.ima?t.on("adsready",(()=>{t.videojs.ima.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,I)})):I()}));const e=s()(N,100);t.videojs.on(k.f.FULL_SCREEN_CHANGE,(()=>{setTimeout(e,100)}));const n=(0,v.q2)(window,"resize",N,!1);t.videojs.on(k.f.DISPOSE,n)}t.videojs.on(k.f.ENDED,(()=>{l()})),t.videojs.on(k.f.ERROR,(()=>{t.pause()}))}()}},8812:(t,e,n)=>{var o=n(2140),a=/^\s+/;t.exports=function(t){return t?t.slice(0,o(t)+1).replace(a,""):t}},2140:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},6177:(t,e,n)=>{var o=n(8953),a=n(3664),i=n(5378),r=Math.max,c=Math.min;t.exports=function(t,e,n){var s,l,d,u,v,p,h=0,f=!1,m=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=s,o=l;return s=l=void 0,h=e,u=t.apply(o,n)}function b(t){var n=t-p;return void 0===p||n>=e||n<0||m&&t-h>=d}function T(){var t=a();if(b(t))return x(t);v=setTimeout(T,function(t){var n=e-(t-p);return m?c(n,d-(t-h)):n}(t))}function x(t){return v=void 0,g&&s?y(t):(s=l=void 0,u)}function E(){var t=a(),n=b(t);if(s=arguments,l=this,p=t,n){if(void 0===v)return function(t){return h=t,v=setTimeout(T,e),f?y(t):u}(p);if(m)return clearTimeout(v),v=setTimeout(T,e),y(p)}return void 0===v&&(v=setTimeout(T,e)),u}return e=i(e)||0,o(n)&&(f=!!n.leading,d=(m="maxWait"in n)?r(i(n.maxWait)||0,e):d,g="trailing"in n?!!n.trailing:g),E.cancel=function(){void 0!==v&&clearTimeout(v),h=0,s=p=l=v=void 0},E.flush=function(){return void 0===v?u:x(a())},E}},5114:t=>{t.exports=function(){}},3664:(t,e,n)=>{var o=n(1433);t.exports=function(){return o.Date.now()}},2858:(t,e,n)=>{var o=n(6177),a=n(8953);t.exports=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return a(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),o(t,e,{leading:i,maxWait:e,trailing:r})}},5378:(t,e,n)=>{var o=n(8812),a=n(8953),i=n(5414),r=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(a(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=a(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=o(t);var n=c.test(t);return n||s.test(t)?l(t.slice(2),n?2:8):r.test(t)?NaN:+t}}}]);
//# sourceMappingURL=interaction-areas.js.map